<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="org.dows.account.mapper.AccountMapper">

    <select id="selectAccountPage" parameterType="org.dows.account.query.AccountQuery" resultType="org.dows.account.vo.AccountVo">
        SELECT
            t1.id,
            t1.account_name,
            t1.avatar,
            t1.phone,
            t1.account_id,
            t1.app_id,
            t3.create_time,
            t3.birthday,
            t3.province,
            t3.city,
            t3.tenant_id,
            t3.sex,
            t3.job,
            t3.education,
            t3.nation,
            t3.client_no AS accountClientNo
        FROM
            account_instance t1,
            account_tenant t2,
            account_user_info t3
        WHERE
            t1.account_id = t2.account_id
          AND t3.account_id = t1.account_id
        <if test="accountQuery.infoIfFull != null and accountQuery.infoIfFull">
            and t3.birthday IS NOT NULL
            and t3.sex IS NOT NULL
            and t3.city IS NOT NULL
            and t1.phone IS NOT NULL
        </if>
        <if test="accountQuery.accountName != null">
            AND like concat( '%' , #{accountQuery.accountName}, '%')
        </if>
        <if test="accountQuery.createStartDate != null">
            AND DATE(t3.create_time) &gt;= #{accountQuery.createStartDate}
        </if>
        <if test="accountQuery.createEndDate != null">
            AND DATE(t3.create_time) &lt;= #{accountQuery.createEndDate}
        </if>
        <if test="accountQuery.birthdayStartDate != null">
            AND DATE(t3.birthday) &gt;= #{accountQuery.birthdayStartDate}
        </if>
        <if test="accountQuery.birthdayEndDate != null">
            AND DATE(t3.birthday) &lt;= #{accountQuery.birthdayEndDate}
        </if>
    </select>
</mapper>
